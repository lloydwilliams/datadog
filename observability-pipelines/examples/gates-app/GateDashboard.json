{"title":"Gate Dashboard","description":"## Dashboard to Track Gate Entry","widgets":[{"id":2444995923641646,"definition":{"title":"Entry with Exit by Gate and Location","title_size":"16","title_align":"left","requests":[{"formulas":[{"formula":"a","limit":{"count":10,"order":"desc"}}],"queries":[{"data_source":"logs","name":"a","search":{"query":"@gate:$gate.value @location:$location.value"},"indexes":["*"],"compute":{"aggregation":"count"},"group_by":[{"facet":"@gate","limit":100,"sort":{"aggregation":"count","order":"desc"},"should_exclude_missing":true}],"storage":"hot"}],"response_format":"scalar"}],"type":"sunburst","legend":{"type":"table"}},"layout":{"x":0,"y":0,"width":6,"height":5}},{"id":2103618024857746,"definition":{"title":"Average Time by Location","title_size":"16","title_align":"left","type":"toplist","requests":[{"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"avg:gateapp.timeatgate{location:$location.value} by {location}","aggregator":"avg"}],"formulas":[{"formula":"query1","limit":{"count":10,"order":"desc"}}]}]},"layout":{"x":6,"y":0,"width":6,"height":5}},{"id":3485078650416012,"definition":{"title":"","title_size":"16","title_align":"left","requests":[{"response_format":"event_list","query":{"data_source":"logs_stream","query_string":"service:gate-app @gate:$gate.value @location:$location.value","indexes":[],"storage":"hot"},"columns":[{"field":"status_line","width":"auto"},{"field":"timestamp","width":"auto"},{"field":"@location","width":"auto"},{"field":"@gate","width":"auto"},{"field":"@unix_difference","width":"auto"},{"field":"@timestamp_in","width":"auto"},{"field":"@unixtime_in","width":"auto"},{"field":"@unixtime_out","width":"auto"},{"field":"@timestamp_out","width":"auto"},{"field":"content","width":"full"}]}],"type":"list_stream"},"layout":{"x":0,"y":5,"width":10,"height":3}},{"id":5741840348018440,"definition":{"type":"note","content":"## Gate\n\nEach log represents one ENTRY with an EXIT at a gate. ","background_color":"yellow","font_size":"14","text_align":"left","vertical_align":"top","show_tick":true,"tick_pos":"50%","tick_edge":"left","has_padding":true},"layout":{"x":10,"y":5,"width":2,"height":2}},{"id":66628958255318,"definition":{"title":"Average Time at a Gate For Past 1 Hour","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"1h"},"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"name":"query1","data_source":"metrics","query":"avg:gateapp.timeatgate{gate:$gate.value,location:$location.value} by {gate}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","include_zero":true,"label":"","min":"auto","max":"auto"},"markers":[{"label":"5 seconds","value":"y = 5000","display_type":"error dashed"}]},"layout":{"x":0,"y":8,"width":12,"height":4}},{"id":5476865317746702,"definition":{"title":"","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"a"}],"queries":[{"data_source":"logs","name":"a","search":{"query":"service:gate-app source:observability-pipelines @gate:$gate.value"},"indexes":["*"],"compute":{"aggregation":"count","interval":300000},"group_by":[{"facet":"@location","limit":10,"sort":{"aggregation":"count","order":"desc"},"should_exclude_missing":true},{"facet":"@gate","limit":10,"sort":{"aggregation":"count","order":"desc"},"should_exclude_missing":true}],"storage":"hot"}],"response_format":"timeseries","style":{"palette":"dog_classic"},"display_type":"bars"}]},"layout":{"x":0,"y":12,"width":12,"height":4}}],"template_variables":[{"name":"gate","prefix":"@gate","available_values":[],"default":"*"},{"name":"location","prefix":"@location","available_values":[],"default":"*"}],"layout_type":"ordered","notify_list":[],"template_variable_presets":[{"name":"Calgary","template_variables":[{"name":"location","value":"calgary"}]}],"reflow_type":"fixed","id":"hnz-26k-uay"}